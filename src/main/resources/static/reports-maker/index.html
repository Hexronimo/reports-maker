<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Отчёты</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
    <script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@2.2.0/dist/bootstrap-vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>
    <script src="http://unpkg.com/portal-vue"></script>
</head>
<body>
<div id="root">
<template>
<div>
    <b-navbar toggleable="lg" type="dark" variant="dark">
    <b-navbar-brand>Отчёты</b-navbar-brand>

    <b-navbar-toggle target="nav-collapse" ></b-navbar-toggle>

    <b-collapse id="nav-collapse" is-nav>
      <b-navbar-nav>
        <b-button variant="link" @click="add" v-show="templatePart1" class="mr-3 text-light">Создать</b-button>
        <b-button variant="link" @click="listview" v-show="templatePart2" class="mr-3 text-light">Вернуться к списку</b-button>
        <b-navbar-nav v-show="seen" class="ml-3 m-1">
            <b-button class="my-2 my-sm-0 mr-2" v-show="templatePart1" @click="open" size="sm">Открыть</b-button>
            <b-button class="my-2 my-sm-0" v-show="templatePart1" @click="del" size="sm">Удалить</b-button>
        </b-navbar-nav>
      </b-navbar-nav>
      <b-navbar-nav class="ml-auto">
        <b-nav-form>
          <b-form-input size="sm" class="mr-sm-2" placeholder="Слова для поиска"></b-form-input>
          <b-button size="sm" class="my-2 my-sm-0" type="submit">Найти</b-button>
        </b-nav-form>
      </b-navbar-nav>

    </b-collapse>
  </b-navbar>
 </div> 

  <div v-show="templatePart1">
    <b-table hover ref="selectableTable" selectable selected-variant="success" select-mode="single" @row-selected="onRowSelected" responsive="sm" outlined :fields="fields" :items="reports">
            <template v-slot:cell(selected)="{ rowSelected }">
                <template v-if="rowSelected">
                    <span aria-hidden="true">&check;</span>
                    <span class="sr-only">Selected</span>
                </template>
                <template v-else>
                    <span aria-hidden="true">&nbsp;</span>
                    <span class="sr-only">Not selected</span>
                </template>
            </template>
    </b-table>
  </div>

   <div class="container mt-5" v-show="templatePart2">
    <b-form @submit="onSubmit" novalidate>
      <b-form-group id="input-group-1" label="Название:" label-for="input-1">
        <b-input :disabled="form.disabled == true"
          id="input-1"
          v-model="selected[0].name"
          :state="form.isvalid1"
          required
        ></b-input>
      <b-form-invalid-feedback :state="form.isvalid1">
        Напишите название
      </b-form-invalid-feedback>
      </b-form-group>
      <b-form-group id="input-group-4" label="Название для отчётов:" 
      description="Название мероприятия, которое будет отображаться в отчётах. Можно оставить пустым, если совпадает с обычным названием"
      label-for="input-4">
        <b-form-input :disabled="form.disabled == true"
          id="input-4"
          v-model="selected[0].officialName"
        ></b-form-input>

      </b-form-group>
      <div class="row">
        <div class="col-sm-6">
          <b-form-group id="input-group-2 mb-2" label="Дата начала:" label-for="input-2" >
            <b-input inline id="input-2" :disabled="form.disabled == true"
                  type="date"
                  v-model="selected[0].dateStart"
                  required
                  :state="form.isvalid2"
            ></b-input>
          <b-form-invalid-feedback :state="form.isvalid2">
            Введите дату начала
          </b-form-invalid-feedback>
          </b-form-group>
        </div>
        <div class="col-sm-6">
          <b-form-group id="input-group-2 mb-2" label="Дата окончания (необязательно):" label-for="input-3" >
            <b-form-input inline id="input-3" :disabled="form.disabled == true"
                  type="date"
                  v-model="selected[0].dateEnd"
                  :state="form.isvalid3"
            ></b-form-input>
            <b-form-invalid-feedback :state="form.isvalid3">
            Дата окончания должна быть позже даты начала
            </b-form-invalid-feedback>
          </b-form-group>
        </div>
      </div>
    <b-button variant="primary" v-show="form.disabled != true" type="submit">Сохранить</b-button>
    <b-button variant="primary" v-show="form.disabled == true" @click="editClick">Редактировать</b-button>
    </b-form>
  </div>
</template>
</div>

<script src="js/vuemain.js"></script>
</body>
</html>